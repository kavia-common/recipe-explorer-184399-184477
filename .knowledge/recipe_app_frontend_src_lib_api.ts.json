{"is_source_file": true, "format": "TypeScript", "description": "This file defines types, constants, and functions for managing recipe data in a frontend application. It includes methods to fetch recipes from an API or local mock data, filter recipes, and retrieve popular or newest recipes.", "external_files": ["../data/recipes.json"], "external_methods": ["fetch", "import.meta.glob", "Date.parse"], "published": ["Recipe", "getAllRecipes", "getRecipeById", "filterRecipes", "popular", "newest"], "classes": [], "methods": [{"name": "async function loadLocal(): Promise<Recipe[]> { loadLocal", "description": "Loads local recipe data from a JSON file using import.meta.glob, caching it for subsequent calls.", "scope": "", "scopeKind": ""}, {"name": "async function fetchJSON<T>(url: string): Promise<T> { fetchJSON", "description": "Fetches JSON data from a specified URL, throwing an error if the response is not successful.", "scope": "", "scopeKind": ""}, {"name": "export async function getAllRecipes(): Promise<Recipe[]> { getAllRecipes", "description": "Fetches all recipes either from an API endpoint or local mock data.", "scope": "", "scopeKind": ""}, {"name": "export async function getRecipeById(id: string): Promise<Recipe | null> { getRecipeById", "description": "Retrieves a specific recipe by its ID from API or local data.", "scope": "", "scopeKind": ""}, {"name": "export function filterRecipes( filterRecipes", "description": "Filters an array of recipes based on search query, category, and ingredients.", "scope": "", "scopeKind": ""}, {"name": "export function popular(recipes: Recipe[]): Recipe[] { popular", "description": "Filters and returns recipes marked as popular.", "scope": "", "scopeKind": ""}, {"name": "export function newest(recipes: Recipe[], limit?: number): Recipe[] { newest", "description": "Sorts recipes by creation date and returns the newest ones, optionally limited in number.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "import.meta.glob", "Date.parse", "Object.values", "Array.isArray", "encodeURIComponent"], "search-terms": ["Recipe type", "fetch local mock data", "fetch JSON API", "filter recipes", "popular recipes", "newest recipes", "import.meta.glob", "local cache", "fallback data"], "state": 2, "file_id": 9, "knowledge_revision": 27, "git_revision": "", "revision_history": [{"20": ""}, {"23": ""}, {"27": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^const API_BASE = (import.meta as unknown as { env?: Env })?.env?.PUBLIC_API_BASE as string | und/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Env", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^type Env = { PUBLIC_API_BASE?: string } | undefined;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export type Recipe = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const all = await loadLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeById", "scopeKind": "function"}, {"_type": "tag", "name": "cat", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const cat = (opts.category ?? '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const data = (mod?.default ?? mod) as Recipe[];$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "fetchJSON", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^async function fetchJSON<T>(url: string): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "filterRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function filterRecipes($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAllRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export async function getAllRecipes(): Promise<Recipe[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getRecipeById", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export async function getRecipeById(id: string): Promise<Recipe | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ing", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const ing = (opts.ingredients ?? []).map((s) => s.toLowerCase().trim()).filter(Boolean);$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "loadLocal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^async function loadLocal(): Promise<Recipe[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "localCache", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^let localCache: Recipe[] | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "matchesCat", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesCat = !cat || r.category.toLowerCase() === cat;$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "matchesIng", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesIng = ing.length === 0 || ing.every((i) => r.ingredients.map((x) => x.toLowerCa/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "matchesQ", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesQ =$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "mod", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const mod = Object.values(modules)[0];$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "modules", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const modules = import.meta.glob('..\\/data\\/recipes.json', { eager: true }) as Record<string, /", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "newest", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function newest(recipes: Recipe[], limit?: number): Recipe[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "popular", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function popular(recipes: Recipe[]): Recipe[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const q = (opts.q ?? '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url);$/", "language": "TypeScript", "kind": "constant", "scope": "fetchJSON", "scopeKind": "function"}, {"_type": "tag", "name": "sorted", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const sorted = [...recipes].sort((a, b) => {$/", "language": "TypeScript", "kind": "constant", "scope": "newest", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^      const url = `${API_BASE.replace(\\/\\\\\\/$\\/, '')}\\/recipes\\/${encodeURIComponent(id)}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeById", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^      const url = `${API_BASE.replace(\\/\\\\\\/$\\/, '')}\\/recipes`;$/", "language": "TypeScript", "kind": "constant", "scope": "getAllRecipes", "scopeKind": "function"}], "hash": "92cd36312de4f38777bc2e44478941d9", "format-version": 4, "code-base-name": "recipe_app_frontend", "filename": "recipe_app_frontend/src/lib/api.ts", "fields": [{"name": "let localCache: Recipe[] | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}