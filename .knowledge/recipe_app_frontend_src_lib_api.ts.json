{"is_source_file": true, "format": "TypeScript", "description": "This file defines types, constants, and functions for handling recipe data in a web application. It includes functions to fetch recipes from an API or local mock data, filter recipes based on search criteria, and retrieve popular or newest recipes.", "external_files": ["../data/recipes.json"], "external_methods": ["fetch"], "published": ["Recipe", "getAllRecipes", "getRecipeById", "filterRecipes", "popular", "newest"], "classes": [], "methods": [{"name": "async function loadLocal(): Promise<Recipe[]> { loadLocal", "description": "Loads local recipe data from a JSON file using Vite's import.meta.glob for SSR-safe import.", "scope": "", "scopeKind": ""}, {"name": "async function fetchJSON<T>(url: string): Promise<T> { fetchJSON", "description": "Generic utility to fetch and parse JSON data from a given URL.", "scope": "", "scopeKind": ""}, {"name": "export function filterRecipes( filterRecipes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getAllRecipes(): Promise<Recipe[]> { getAllRecipes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export async function getRecipeById(id: string): Promise<Recipe | null> { getRecipeById", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function newest(recipes: Recipe[], limit?: number): Recipe[] { newest", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export function popular(recipes: Recipe[]): Recipe[] { popular", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "loadLocal", "fetchJSON"], "search-terms": ["Recipe type", "API_BASE fetch", "local recipe mock", "filterRecipes function", "popular recipes", "newest recipes", "import.meta.glob"], "state": 2, "file_id": 9, "knowledge_revision": 31, "git_revision": "", "revision_history": [{"20": ""}, {"23": ""}, {"27": ""}, {"31": ""}], "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^const API_BASE = (import.meta as unknown as { env?: Env })?.env?.PUBLIC_API_BASE ?? undefined;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Env", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^type Env = { PUBLIC_API_BASE?: string } | undefined;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export type Recipe = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const all = await loadLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeById", "scopeKind": "function"}, {"_type": "tag", "name": "cat", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const cat = (opts.category ?? '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const data = (mod?.default ?? mod) as Recipe[];$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "fetchJSON", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^async function fetchJSON<T>(url: string): Promise<T> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "filterRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function filterRecipes($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getAllRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export async function getAllRecipes(): Promise<Recipe[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getRecipeById", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export async function getRecipeById(id: string): Promise<Recipe | null> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ing", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const ing = (opts.ingredients ?? []).map((s) => s.toLowerCase().trim()).filter(Boolean);$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "loadLocal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^async function loadLocal(): Promise<Recipe[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "localCache", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^let localCache: Recipe[] | null = null;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "matchesCat", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesCat = !cat || r.category.toLowerCase() === cat;$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "matchesIng", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesIng = ing.length === 0 || ing.every((i) => r.ingredients.map((x) => x.toLowerCa/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "matchesQ", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^    const matchesQ =$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "mod", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const mod = Object.values(modules)[0];$/", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "modules", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const modules = import.meta.glob('..\\/data\\/recipes.json', { eager: true }) as Record<string, /", "language": "TypeScript", "kind": "constant", "scope": "loadLocal", "scopeKind": "function"}, {"_type": "tag", "name": "newest", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function newest(recipes: Recipe[], limit?: number): Recipe[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "popular", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^export function popular(recipes: Recipe[]): Recipe[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "q", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const q = (opts.q ?? '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "filterRecipes", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const res = await fetch(url);$/", "language": "TypeScript", "kind": "constant", "scope": "fetchJSON", "scopeKind": "function"}, {"_type": "tag", "name": "sorted", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^  const sorted = [...recipes].sort((a, b) => {$/", "language": "TypeScript", "kind": "constant", "scope": "newest", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^      const url = `${API_BASE.replace(\\/\\\\\\/$\\/, '')}\\/recipes\\/${encodeURIComponent(id)}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getRecipeById", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-184399-184477/recipe_app_frontend/src/lib/api.ts", "pattern": "/^      const url = `${API_BASE.replace(\\/\\\\\\/$\\/, '')}\\/recipes`;$/", "language": "TypeScript", "kind": "constant", "scope": "getAllRecipes", "scopeKind": "function"}], "hash": "733f11e03fd9d1282850a2ef647341e9", "format-version": 4, "code-base-name": "recipe_app_frontend", "filename": "recipe_app_frontend/src/lib/api.ts", "fields": [{"name": "let localCache: Recipe[] | null = null;", "scope": "", "scopeKind": "", "description": "unavailable"}]}